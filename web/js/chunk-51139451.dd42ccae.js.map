{"version":3,"sources":["webpack:///./src/api/building.js","webpack:///./src/views/cms/Building.vue?d9a7","webpack:///src/views/cms/Building.vue","webpack:///./src/views/cms/Building.vue?bb0c","webpack:///./src/views/cms/Building.vue","webpack:///./src/components/Crud.vue?a0cb","webpack:///src/components/Crud.vue","webpack:///./src/components/Crud.vue?ab13","webpack:///./src/components/Crud.vue","webpack:///./src/components/Crud.vue?5e65"],"names":["getList","params","request","url","method","getAll","all","getDetails","id","add","data","remove","update","render","_vm","this","_h","$createElement","_c","_self","attrs","crudOptions","staticRenderFns","name","components","Crud","columns","enableDetails","detailsColumns","component","staticClass","on","handleAdd","_v","staticStyle","$event","reload","model","value","callback","$$v","keyword","expression","directives","rawName","tableData","_l","options","col","i","type","key","label","scopedSlots","_u","fn","slotProps","row","status","_s","prop","handleDetails","_e","handleEdit","handleDelete","slot","pageSize","total","dialogTitle","addDialogVisible","form","pk","ref","$set","item","j","_n","commit","detailsDialogVisible","detailsData","props","loading","methods","pageNum","mounted"],"mappings":"kHAAA,4NAEO,SAASA,IAAqB,IAAbC,EAAa,uDAAJ,GAC/B,OAAOC,eAAQ,CACbC,IAAK,YACLC,OAAQ,MACRH,WAIG,SAASI,IACd,OAAOH,eAAQ,CACbC,IAAK,YACLC,OAAQ,MACRH,OAAQ,CACNK,KAAK,KAKJ,SAASC,EAAT,GAA4B,IAANC,EAAM,EAANA,GAC3B,OAAON,eAAQ,CACbC,IAAK,mBACLC,OAAQ,MACRH,OAAQ,CACNO,QAKC,SAASC,EAAIC,GAClB,OAAOR,eAAQ,CACbC,IAAK,YACLC,OAAQ,OACRM,SAIG,SAASC,EAAT,GAAwB,IAANH,EAAM,EAANA,GACvB,OAAON,eAAQ,CACbC,IAAK,YACLC,OAAQ,SACRM,KAAM,CACJF,QAKC,SAASI,EAAOF,GACrB,OAAOR,eAAQ,CACbC,IAAK,YACLC,OAAQ,MACRM,W,kECpDJ,IAAIG,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,aAAa,CAACF,EAAG,OAAO,CAACE,MAAM,CAAC,QAAUN,EAAIO,gBAAgB,IAChLC,EAAkB,G,wBCWtB,GACEC,KAAM,WACNC,WAAY,CACVC,KAAJ,QAEEf,KALF,WAMI,MAAO,CACLW,YAAa,CACXrB,QAAR,OACQ0B,QAAS,CACjB,CAAU,KAAV,KAAU,MAAV,IAAU,IAAV,GACA,CAAU,KAAV,YAAU,MAAV,MACA,CAAU,KAAV,aAAU,MAAV,MACA,CAAU,KAAV,WAAU,MAAV,OAEQjB,IAAR,OACQE,OAAR,OACQC,OAAR,OACQe,eAAe,EACfpB,WAAR,OACQqB,eAAgB,CACxB,CAAU,KAAV,wBAAU,MAAV,SACA,CAAU,KAAV,0BAAU,MAAV,QACA,CAAU,KAAV,eAAU,MAAV,WACA,CAAU,KAAV,gBAAU,MAAV,eCpCiW,I,YCO7VC,EAAY,eACd,EACAhB,EACAS,GACA,EACA,KACA,WACA,MAIa,aAAAO,E,2CClBf,IAAIhB,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACY,YAAY,QAAQ,CAACZ,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,gBAAgB,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,SAASW,GAAG,CAAC,MAAQjB,EAAIkB,YAAY,CAAClB,EAAImB,GAAG,UAAUf,EAAG,WAAW,CAACgB,YAAY,CAAC,MAAQ,SAASd,MAAM,CAAC,cAAc,iBAAiB,YAAc,WAAWW,GAAG,CAAC,OAAS,SAASI,GAAQ,OAAOrB,EAAIsB,WAAWC,MAAM,CAACC,MAAOxB,EAAW,QAAEyB,SAAS,SAAUC,GAAM1B,EAAI2B,QAAQD,GAAKE,WAAW,cAAc,GAAGxB,EAAG,WAAW,CAACyB,WAAW,CAAC,CAACpB,KAAK,UAAUqB,QAAQ,YAAYN,MAAOxB,EAAW,QAAE4B,WAAW,YAAYR,YAAY,CAAC,MAAQ,QAAQd,MAAM,CAAC,KAAON,EAAI+B,UAAU,OAAS,GAAG,KAAO,QAAQ,OAAS,KAAK,CAAC/B,EAAIgC,GAAIhC,EAAIiC,QAAe,SAAE,SAASC,EAAIC,GAAG,MAAO,CAAe,YAAbD,EAAIE,KAAoBhC,EAAG,kBAAkB,CAACiC,IAAIF,EAAE7B,MAAM,CAAC,MAAQ4B,EAAII,OAAOC,YAAYvC,EAAIwC,GAAG,CAAC,CAACH,IAAI,UAAUI,GAAG,SAASC,GAAW,MAAO,CAACtC,EAAG,SAAS,CAACE,MAAM,CAAC,KAAOoC,EAAUC,IAAIC,OAAS,UAAY,WAAW,CAAC5C,EAAImB,GAAG,IAAInB,EAAI6C,GAAGH,EAAUC,IAAIC,OAAS,MAAQ,MAAM,WAAW,MAAK,KAAQxC,EAAG,kBAAkB,CAACiC,IAAIF,EAAE7B,MAAM,CAAC,KAAO4B,EAAIY,KAAK,MAAQZ,EAAII,aAAYlC,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,QAAQ,MAAQ,MAAMiC,YAAYvC,EAAIwC,GAAG,CAAC,CAACH,IAAI,UAAUI,GAAG,SAASC,GAAW,MAAO,CAAE1C,EAAIiC,QAAqB,cAAE7B,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,SAASW,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOrB,EAAI+C,cAAcL,EAAUC,QAAQ,CAAC3C,EAAImB,GAAG,UAAUnB,EAAIgD,KAAK5C,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,SAASW,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOrB,EAAIiD,WAAWP,EAAUC,QAAQ,CAAC3C,EAAImB,GAAG,UAAUf,EAAG,gBAAgB,CAACgB,YAAY,CAAC,cAAc,OAAOd,MAAM,CAAC,MAAQ,UAAUW,GAAG,CAAC,QAAU,SAASI,GAAQ,OAAOrB,EAAIkD,aAAaR,EAAUC,QAAQ,CAACvC,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,YAAY,KAAO,SAAS,KAAO,SAAS6C,KAAK,aAAa,CAACnD,EAAImB,GAAG,SAAS,WAAW,GAAGf,EAAG,MAAM,CAACY,YAAY,sBAAsB,CAACZ,EAAG,gBAAgB,CAACgB,YAAY,CAAC,aAAa,QAAQd,MAAM,CAAC,WAAa,GAAG,OAAS,8CAA8C,YAAYN,EAAIoD,SAAS,MAAQpD,EAAIqD,OAAOpC,GAAG,CAAC,kBAAkB,SAASI,GAAQrB,EAAIoD,SAAS/B,GAAQ,mBAAmB,SAASA,GAAQrB,EAAIoD,SAAS/B,GAAQ,iBAAiBrB,EAAIsB,OAAO,cAAc,SAASD,GAAQ,OAAOrB,EAAIsB,cAAc,GAAGlB,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQN,EAAIsD,YAAY,MAAQ,MAAM,QAAUtD,EAAIuD,kBAAkBtC,GAAG,CAAC,iBAAiB,SAASI,GAAQrB,EAAIuD,iBAAiBlC,KAAU,CAACjB,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQN,EAAIwD,OAAO,CAACxD,EAAIgC,GAAIhC,EAAIiC,QAAe,SAAE,SAASC,EAAIC,GAAG,MAAO,CAAGD,EAAIuB,IAAmB,WAAbvB,EAAIE,KAA0PF,EAAIuB,IAAmB,YAAbvB,EAAIE,MAAwRF,EAAIuB,IAAMvB,EAAIwB,IAAKtD,EAAG,eAAe,CAACiC,IAAIF,EAAE7B,MAAM,CAAC,MAAQ4B,EAAII,QAAQ,CAAClC,EAAG,YAAY,CAACE,MAAM,CAAC,YAAc,OAAOiB,MAAM,CAACC,MAAOxB,EAAIwD,KAAKtB,EAAIwB,IAAIrB,KAAMZ,SAAS,SAAUC,GAAM1B,EAAI2D,KAAK3D,EAAIwD,KAAMtB,EAAIwB,IAAIrB,IAAKX,IAAME,WAAW,sBAAsB5B,EAAIgC,GAAIE,EAAIwB,IAAU,QAAE,SAASE,EAAKC,GAAG,OAAOzD,EAAG,YAAY,CAACiC,IAAIwB,EAAEvD,MAAM,CAAC,MAAQsD,EAAK1B,EAAIwB,IAAIpB,OAAO,MAAQsB,EAAKlE,SAAQ,IAAI,GAAKwC,EAAIuB,GAAyMzD,EAAIgD,KAAzM5C,EAAG,eAAe,CAACiC,IAAIF,EAAE7B,MAAM,CAAC,MAAQ4B,EAAII,QAAQ,CAAClC,EAAG,WAAW,CAACmB,MAAM,CAACC,MAAOxB,EAAIwD,KAAKtB,EAAIY,MAAOrB,SAAS,SAAUC,GAAM1B,EAAI2D,KAAK3D,EAAIwD,KAAMtB,EAAIY,KAAMpB,IAAME,WAAW,qBAAqB,GAA90BxB,EAAG,eAAe,CAACiC,IAAIF,EAAE7B,MAAM,CAAC,MAAQ4B,EAAII,QAAQ,CAAClC,EAAG,YAAY,CAACE,MAAM,CAAC,eAAe,UAAU,iBAAiB,WAAWiB,MAAM,CAACC,MAAOxB,EAAIwD,KAAKtB,EAAIY,MAAOrB,SAAS,SAAUC,GAAM1B,EAAI2D,KAAK3D,EAAIwD,KAAMtB,EAAIY,KAAMpB,IAAME,WAAW,qBAAqB,GAAxgBxB,EAAG,eAAe,CAACiC,IAAIF,EAAE7B,MAAM,CAAC,MAAQ4B,EAAII,QAAQ,CAAClC,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,UAAUiB,MAAM,CAACC,MAAOxB,EAAIwD,KAAKtB,EAAIY,MAAOrB,SAAS,SAAUC,GAAM1B,EAAI2D,KAAK3D,EAAIwD,KAAMtB,EAAIY,KAAM9C,EAAI8D,GAAGpC,KAAOE,WAAW,qBAAqB,QAAq4B,GAAGxB,EAAG,OAAO,CAACY,YAAY,gBAAgBV,MAAM,CAAC,KAAO,UAAU6C,KAAK,UAAU,CAAC/C,EAAG,YAAY,CAACa,GAAG,CAAC,MAAQ,SAASI,GAAQrB,EAAIuD,kBAAmB,KAAS,CAACvD,EAAImB,GAAG,SAASf,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWW,GAAG,CAAC,MAAQjB,EAAI+D,SAAS,CAAC/D,EAAImB,GAAG,UAAU,IAAI,GAAInB,EAAIiC,QAAqB,cAAE7B,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,OAAO,QAAUN,EAAIgE,qBAAqB,MAAQ,OAAO/C,GAAG,CAAC,iBAAiB,SAASI,GAAQrB,EAAIgE,qBAAqB3C,KAAU,CAACjB,EAAG,MAAMJ,EAAIgC,GAAIhC,EAAIiC,QAAsB,gBAAE,SAASC,EAAIC,GAAG,OAAO/B,EAAG,IAAI,CAACiC,IAAIF,GAAG,CAAC/B,EAAG,SAAS,CAACJ,EAAImB,GAAGnB,EAAI6C,GAAGX,EAAII,OAAO,OAAOtC,EAAImB,GAAGnB,EAAI6C,GAAG7C,EAAIiE,YAAY/B,EAAIY,OAAO,UAAS,GAAG1C,EAAG,OAAO,CAACY,YAAY,gBAAgBV,MAAM,CAAC,KAAO,UAAU6C,KAAK,UAAU,CAAC/C,EAAG,YAAY,CAACa,GAAG,CAAC,MAAQ,SAASI,GAAQrB,EAAIgE,sBAAuB,KAAS,CAAChE,EAAImB,GAAG,UAAU,KAAKnB,EAAIgD,MAAM,IAC17IxC,EAAkB,G,YCgJtB,GACEC,KAAM,OACNyD,MAAO,CAAC,WACRtE,KAHF,WAII,MAAO,CACL0D,YAAa,GACba,SAAS,EACTH,sBAAsB,EACtBT,kBAAkB,EAClBU,YAAa,GACblC,UAAW,GACXyB,KAAM,GACNH,MAAO,EACPD,SAAU,GACVzB,QAAS,KAGbyC,QAAS,CACPnB,WADJ,SACA,GACM,IAAN,uBACMO,EAAKZ,OAAyB,IAAhBY,EAAKZ,OACnB3C,KAAKuD,KAAOA,EACZvD,KAAKqD,YAAc,KACnBrD,KAAKsD,kBAAmB,GAE1BL,aARJ,SAQA,cACMjD,KAAKgC,QAAQpC,OAAO,CAA1B,UACA,kBAAQ,IACR,YACQ,EAAR,oBACQ,EAAR,aAGIkD,cAhBJ,SAgBA,cACM9C,KAAKgC,QAAQxC,WAAW,CAA9B,UACA,kBACQ,EAAR,mBACQ,EAAR,4BAGIyB,UAvBJ,WAwBMjB,KAAKuD,KAAO,GACZvD,KAAKqD,YAAc,KACnBrD,KAAKsD,kBAAmB,GAE1BQ,OA5BJ,WA4BA,WACU9D,KAAKuD,KAAK9D,GACZO,KAAKgC,QAAQnC,OAAOG,KAAKuD,MACjC,kBAAU,IACV,YACU,EAAV,oBACU,EAAV,SACU,EAAV,uBAGQvD,KAAKgC,QAAQtC,IAAIM,KAAKuD,MAC9B,kBAAU,IACV,YACU,EAAV,oBACU,EAAV,SACU,EAAV,wBAIIlC,OA/CJ,WA+CA,sEACMrB,KAAKkE,SAAU,EACflE,KAAKgC,QAAQ/C,QAAQ,CACnBmF,QAAR,EACQjB,SAAUnD,KAAKmD,SACfzB,QAAS1B,KAAK0B,UAEtB,kBACQ,EAAR,WADQ,IAAR,EAEA,SAFA,EAEA,OAFA,EAEA,MACQ,EAAR,YACQ,EAAR,aAIE2C,QA/EF,WAgFIrE,KAAKqB,WCjOqU,I,wBCQ1UP,EAAY,eACd,EACAhB,EACAS,GACA,EACA,KACA,WACA,MAIa,OAAAO,E,2CCnBf","file":"js/chunk-51139451.dd42ccae.js","sourcesContent":["import request from '../utils/request';\n\nexport function getList(params = {}) {\n  return request({\n    url: '/building',\n    method: 'GET',\n    params,\n  });\n}\n\nexport function getAll() {\n  return request({\n    url: '/building',\n    method: 'GET',\n    params: {\n      all: true,\n    },\n  });\n}\n\nexport function getDetails({ id }) {\n  return request({\n    url: '/building/detail',\n    method: 'GET',\n    params: {\n      id,\n    },\n  });\n}\n\nexport function add(data) {\n  return request({\n    url: '/building',\n    method: 'POST',\n    data,\n  });\n}\n\nexport function remove({ id }) {\n  return request({\n    url: '/building',\n    method: 'DELETE',\n    data: {\n      id,\n    },\n  });\n}\n\nexport function update(data) {\n  return request({\n    url: '/building',\n    method: 'PUT',\n    data,\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"building\"}},[_c('Crud',{attrs:{\"options\":_vm.crudOptions}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"building\">\n      <Crud :options=\"crudOptions\" />\n    </div>\n</template>\n\n<script>\nimport Crud from '../../components/Crud.vue';\nimport {\n  getList, getDetails, add, remove, update,\n} from '../../api/building';\n\nexport default {\n  name: 'Building',\n  components: {\n    Crud,\n  },\n  data() {\n    return {\n      crudOptions: {\n        getList,\n        columns: [\n          { prop: 'id', label: '#', pk: true },\n          { prop: 'aliasName', label: '楼宇' },\n          { prop: 'department', label: '单位' },\n          { prop: 'fullName', label: '命名' },\n        ],\n        add,\n        remove,\n        update,\n        enableDetails: true,\n        getDetails,\n        detailsColumns: [\n          { prop: 'currentFreeClassrooms', label: '空闲教室数' },\n          { prop: 'totalNumberOfClassrooms', label: '教室总数' },\n          { prop: 'freeCapacity', label: '剩余容量（人）' },\n          { prop: 'totalCapacity', label: '总容量（人）' },\n        ],\n      },\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Building.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Building.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Building.vue?vue&type=template&id=72ef8d2a&scoped=true&\"\nimport script from \"./Building.vue?vue&type=script&lang=js&\"\nexport * from \"./Building.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72ef8d2a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"crud\"},[_c('div',{attrs:{\"id\":\"crud-header\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\" 添加 \")]),_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"prefix-icon\":\"el-icon-search\",\"placeholder\":\"输入关键字搜索\"},on:{\"change\":function($event){return _vm.reload()}},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}})],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\",\"size\":\"small\",\"border\":\"\"}},[_vm._l((_vm.options.columns),function(col,i){return [(col.type === 'boolean')?_c('el-table-column',{key:i,attrs:{\"label\":col.label},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [_c('el-tag',{attrs:{\"type\":slotProps.row.status ? 'success' : 'danger'}},[_vm._v(\" \"+_vm._s(slotProps.row.status ? 'YES' : 'NO')+\" \")])]}}],null,true)}):_c('el-table-column',{key:i,attrs:{\"prop\":col.prop,\"label\":col.label}})]}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [(_vm.options.enableDetails)?_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleDetails(slotProps.row)}}},[_vm._v(\" 详细 \")]):_vm._e(),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleEdit(slotProps.row)}}},[_vm._v(\" 编辑 \")]),_c('el-popconfirm',{staticStyle:{\"margin-left\":\"9px\"},attrs:{\"title\":\"确定删除吗？\"},on:{\"confirm\":function($event){return _vm.handleDelete(slotProps.row)}}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"danger\",\"size\":\"small\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)]}}])})],2),_c('div',{staticClass:\"pagination-wrapper\"},[_c('el-pagination',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"background\":\"\",\"layout\":\"sizes, prev, pager, next, jumper, ->, total\",\"page-size\":_vm.pageSize,\"total\":_vm.total},on:{\"update:pageSize\":function($event){_vm.pageSize=$event},\"update:page-size\":function($event){_vm.pageSize=$event},\"current-change\":_vm.reload,\"size-change\":function($event){return _vm.reload()}}})],1),_c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"width\":\"30%\",\"visible\":_vm.addDialogVisible},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.form}},[_vm._l((_vm.options.columns),function(col,i){return [(!col.pk && col.type === 'number')?_c('el-form-item',{key:i,attrs:{\"label\":col.label}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.form[col.prop]),callback:function ($$v) {_vm.$set(_vm.form, col.prop, _vm._n($$v))},expression:\"form[col.prop]\"}})],1):(!col.pk && col.type === 'boolean')?_c('el-form-item',{key:i,attrs:{\"label\":col.label}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},model:{value:(_vm.form[col.prop]),callback:function ($$v) {_vm.$set(_vm.form, col.prop, $$v)},expression:\"form[col.prop]\"}})],1):(!col.pk && col.ref)?_c('el-form-item',{key:i,attrs:{\"label\":col.label}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form[col.ref.key]),callback:function ($$v) {_vm.$set(_vm.form, col.ref.key, $$v)},expression:\"form[col.ref.key]\"}},_vm._l((col.ref.select),function(item,j){return _c('el-option',{key:j,attrs:{\"label\":item[col.ref.label],\"value\":item.id}})}),1)],1):(!col.pk)?_c('el-form-item',{key:i,attrs:{\"label\":col.label}},[_c('el-input',{model:{value:(_vm.form[col.prop]),callback:function ($$v) {_vm.$set(_vm.form, col.prop, $$v)},expression:\"form[col.prop]\"}})],1):_vm._e()]})],2),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.commit}},[_vm._v(\"确 定\")])],1)],1),(_vm.options.enableDetails)?_c('el-dialog',{attrs:{\"title\":\"详细信息\",\"visible\":_vm.detailsDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.detailsDialogVisible=$event}}},[_c('div',_vm._l((_vm.options.detailsColumns),function(col,i){return _c('p',{key:i},[_c('strong',[_vm._v(_vm._s(col.label)+\"：\")]),_vm._v(_vm._s(_vm.detailsData[col.prop])+\" \")])}),0),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.detailsDialogVisible = false}}},[_vm._v(\"关 闭\")])],1)]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"crud\">\n    <div id=\"crud-header\">\n      <el-button\n        type=\"primary\"\n        size=\"small\"\n        @click=\"handleAdd\">\n        添加\n      </el-button>\n      <el-input\n        prefix-icon=\"el-icon-search\"\n        v-model=\"keyword\"\n        placeholder=\"输入关键字搜索\"\n        @change=\"reload()\"\n        style=\"width: 200px\" />\n    </div>\n    <el-table\n      :data=\"tableData\"\n      stripe\n      size=\"small\"\n      border\n      v-loading=\"loading\"\n      style=\"width: 100%\">\n      <template v-for=\"(col, i) in options.columns\">\n        <el-table-column\n          v-if=\"col.type === 'boolean'\"\n          :key=\"i\"\n          :label=\"col.label\">\n          <template v-slot=\"slotProps\">\n            <el-tag :type=\"slotProps.row.status ? 'success' : 'danger'\">\n              {{ slotProps.row.status ? 'YES' : 'NO' }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column\n          v-else\n          :key=\"i\"\n          :prop=\"col.prop\"\n          :label=\"col.label\">\n        </el-table-column>\n      </template>\n      <el-table-column\n        fixed=\"right\"\n        label=\"操作\">\n        <template v-slot=\"slotProps\">\n          <el-button\n            v-if=\"options.enableDetails\"\n            @click=\"handleDetails(slotProps.row)\"\n            size=\"small\">\n            详细\n          </el-button>\n          <el-button\n            @click=\"handleEdit(slotProps.row)\"\n            type=\"primary\"\n            size=\"small\">\n            编辑\n          </el-button>\n          <el-popconfirm\n            title=\"确定删除吗？\"\n            @confirm=\"handleDelete(slotProps.row)\"\n            style=\"margin-left: 9px\">\n            <el-button slot=\"reference\" type=\"danger\" size=\"small\">删除</el-button>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div class=\"pagination-wrapper\">\n      <el-pagination\n        background\n        layout=\"sizes, prev, pager, next, jumper, ->, total\"\n        :page-size.sync=\"pageSize\"\n        style=\"margin-top: 10px\"\n        @current-change=\"reload\"\n        @size-change=\"reload()\"\n        :total=\"total\">\n      </el-pagination>\n    </div>\n    <!-- dialog for add or edit -->\n    <el-dialog\n      :title=\"dialogTitle\"\n      width=\"30%\"\n      :visible.sync=\"addDialogVisible\">\n      <el-form :model=\"form\">\n        <template v-for=\"(col, i) in options.columns\">\n          <el-form-item\n            v-if=\"!col.pk && col.type === 'number'\"\n            :key=\"i\"\n            :label=\"col.label\">\n            <el-input type=\"number\" v-model.number=\"form[col.prop]\"></el-input>\n          </el-form-item>\n          <el-form-item\n            v-else-if=\"!col.pk && col.type === 'boolean'\"\n            :key=\"i\"\n            :label=\"col.label\">\n            <el-switch\n              v-model=\"form[col.prop]\"\n              active-color=\"#13ce66\"\n              inactive-color=\"#ff4949\">\n            </el-switch>\n          </el-form-item>\n          <el-form-item\n            v-else-if=\"!col.pk && col.ref\"\n            :key=\"i\"\n            :label=\"col.label\">\n            <el-select v-model=\"form[col.ref.key]\" placeholder=\"请选择\">\n              <el-option\n                v-for=\"(item, j) in col.ref.select\"\n                :key=\"j\"\n                :label=\"item[col.ref.label]\"\n                :value=\"item.id\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            v-else-if=\"!col.pk\"\n            :key=\"i\"\n            :label=\"col.label\">\n            <el-input v-model=\"form[col.prop]\"></el-input>\n          </el-form-item>\n        </template>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"commit\">确 定</el-button>\n      </span>\n    </el-dialog>\n    <!-- dialog for details -->\n    <el-dialog\n      v-if=\"options.enableDetails\"\n      title=\"详细信息\"\n      :visible.sync=\"detailsDialogVisible\"\n      width=\"30%\">\n      <div>\n        <p v-for=\"(col, i) in options.detailsColumns\" :key=\"i\">\n          <strong>{{ col.label }}：</strong>{{ detailsData[col.prop] }}\n        </p>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"detailsDialogVisible = false\">关 闭</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Crud',\n  props: ['options'],\n  data() {\n    return {\n      dialogTitle: '',\n      loading: false,\n      detailsDialogVisible: false,\n      addDialogVisible: false,\n      detailsData: {},\n      tableData: [],\n      form: {},\n      total: 0,\n      pageSize: 10,\n      keyword: '',\n    };\n  },\n  methods: {\n    handleEdit(row) {\n      const form = { ...row };\n      form.status = form.status === 1;\n      this.form = form;\n      this.dialogTitle = '编辑';\n      this.addDialogVisible = true;\n    },\n    handleDelete(row) {\n      this.options.remove({ id: row.id })\n        .then((resp) => {\n          const { message } = resp;\n          this.$message.success(message);\n          this.reload();\n        });\n    },\n    handleDetails(row) {\n      this.options.getDetails({ id: row.id })\n        .then((resp) => {\n          this.detailsData = resp.data;\n          this.detailsDialogVisible = true;\n        });\n    },\n    handleAdd() {\n      this.form = {};\n      this.dialogTitle = '添加';\n      this.addDialogVisible = true;\n    },\n    commit() {\n      if (this.form.id) {\n        this.options.update(this.form)\n          .then((resp) => {\n            const { message } = resp;\n            this.$message.success(message);\n            this.reload();\n            this.addDialogVisible = false;\n          });\n      } else {\n        this.options.add(this.form)\n          .then((resp) => {\n            const { message } = resp;\n            this.$message.success(message);\n            this.reload();\n            this.addDialogVisible = false;\n          });\n      }\n    },\n    reload(pageNum = 1) {\n      this.loading = true;\n      this.options.getList({\n        pageNum,\n        pageSize: this.pageSize,\n        keyword: this.keyword,\n      })\n        .then((resp) => {\n          this.loading = false;\n          const { list, total } = resp.data;\n          this.tableData = list;\n          this.total = total;\n        });\n    },\n  },\n  mounted() {\n    this.reload();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  #crud-header {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 10px;\n  }\n\n  .pagination-wrapper {\n    display: flex;\n    justify-content: flex-end;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crud.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crud.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Crud.vue?vue&type=template&id=1327a699&scoped=true&\"\nimport script from \"./Crud.vue?vue&type=script&lang=js&\"\nexport * from \"./Crud.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Crud.vue?vue&type=style&index=0&id=1327a699&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1327a699\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crud.vue?vue&type=style&index=0&id=1327a699&lang=scss&scoped=true&\""],"sourceRoot":""}