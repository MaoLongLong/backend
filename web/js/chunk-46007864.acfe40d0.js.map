{"version":3,"sources":["webpack:///./src/api/building.js","webpack:///./src/views/cms/Classroom.vue?f160","webpack:///./src/api/classroom.js","webpack:///src/views/cms/Classroom.vue","webpack:///./src/views/cms/Classroom.vue?db98","webpack:///./src/views/cms/Classroom.vue","webpack:///./src/components/Crud.vue?0fd0","webpack:///./src/components/Crud.vue?5675","webpack:///src/components/Crud.vue","webpack:///./src/components/Crud.vue?ab13","webpack:///./src/components/Crud.vue"],"names":["getList","params","request","url","method","getAll","all","getDetails","id","add","data","remove","update","render","_vm","this","_h","$createElement","_c","_self","attrs","crudOptions","staticRenderFns","name","components","Crud","columns","mounted","component","staticClass","on","handleAdd","_v","staticStyle","$event","reload","model","value","callback","$$v","keyword","expression","directives","rawName","tableData","_l","options","col","i","type","key","label","scopedSlots","_u","fn","slotProps","row","status","_s","prop","handleDetails","_e","handleEdit","handleDelete","slot","pageSize","pageNum","total","dialogTitle","addDialogVisible","form","pk","ref","$set","item","j","_n","commit","detailsDialogVisible","detailsData","props","loading","methods"],"mappings":"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","file":"js/chunk-46007864.acfe40d0.js","sourcesContent":["import request from '../utils/request';\n\nexport function getList(params = {}) {\n  return request({\n    url: '/building',\n    method: 'GET',\n    params,\n  });\n}\n\nexport function getAll() {\n  return request({\n    url: '/building',\n    method: 'GET',\n    params: {\n      all: true,\n    },\n  });\n}\n\nexport function getDetails({ id }) {\n  return request({\n    url: '/building/details',\n    method: 'GET',\n    params: {\n      id,\n    },\n  });\n}\n\nexport function add(data) {\n  return request({\n    url: '/building',\n    method: 'POST',\n    data,\n  });\n}\n\nexport function remove({ id }) {\n  return request({\n    url: '/building',\n    method: 'DELETE',\n    params: {\n      id,\n    },\n  });\n}\n\nexport function update(data) {\n  return request({\n    url: '/building',\n    method: 'PUT',\n    data,\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"classroom\"}},[_c('Crud',{attrs:{\"options\":_vm.crudOptions}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '../utils/request';\n\nexport function getList(params = {}) {\n  return request({\n    url: '/classroom',\n    method: 'GET',\n    params,\n  });\n}\n\nexport function add(data) {\n  return request({\n    url: '/classroom',\n    method: 'POST',\n    data,\n  });\n}\n\nexport function remove({ id }) {\n  return request({\n    url: '/classroom',\n    method: 'DELETE',\n    params: {\n      id,\n    },\n  });\n}\n\nexport function update(data) {\n  return request({\n    url: '/classroom',\n    method: 'PUT',\n    data,\n  });\n}\n","<template>\n  <div id=\"classroom\">\n    <Crud :options=\"crudOptions\"/>\n  </div>\n</template>\n\n<script>\nimport Crud from '../../components/Crud.vue';\nimport {\n  add, getList, remove, update,\n} from '../../api/classroom';\nimport { getAll } from '../../api/building';\n\nexport default {\n  name: 'Classroom',\n  components: {\n    Crud,\n  },\n  data() {\n    return {\n      crudOptions: {\n        getList,\n        add,\n        remove,\n        update,\n        columns: [\n          {\n            prop: 'id',\n            label: '#',\n            pk: true,\n          },\n          {\n            prop: 'name',\n            label: '名称',\n          },\n          {\n            prop: 'capacity',\n            label: '可容纳人数',\n            type: 'number',\n          },\n          {\n            prop: 'status',\n            label: '空闲',\n            type: 'boolean',\n          },\n          {\n            prop: 'buildingName',\n            label: '所属教学楼',\n            ref: {\n              select: [],\n              key: 'buildingId',\n              label: 'fullName',\n            },\n          },\n        ],\n      },\n    };\n  },\n  mounted() {\n    getAll()\n      .then((resp) => {\n        this.crudOptions.columns[4].ref.select = resp.data;\n      });\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Classroom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Classroom.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Classroom.vue?vue&type=template&id=a37fe1e8&scoped=true&\"\nimport script from \"./Classroom.vue?vue&type=script&lang=js&\"\nexport * from \"./Classroom.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a37fe1e8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crud.vue?vue&type=style&index=0&id=0d095cde&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"crud\"},[_c('div',{attrs:{\"id\":\"crud-header\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\" 添加 \")]),_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"输入关键字搜索\",\"prefix-icon\":\"el-icon-search\"},on:{\"change\":function($event){return _vm.reload()}},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}})],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"size\":\"small\",\"stripe\":\"\"}},[_vm._l((_vm.options.columns),function(col,i){return [(col.type === 'boolean')?_c('el-table-column',{key:i,attrs:{\"label\":col.label},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [_c('el-tag',{attrs:{\"type\":slotProps.row.status ? 'success' : 'danger'}},[_vm._v(\" \"+_vm._s(slotProps.row.status ? 'YES' : 'NO')+\" \")])]}}],null,true)}):_c('el-table-column',{key:i,attrs:{\"label\":col.label,\"prop\":col.prop}})]}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [(_vm.options.enableDetails)?_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleDetails(slotProps.row)}}},[_vm._v(\" 详细 \")]):_vm._e(),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleEdit(slotProps.row)}}},[_vm._v(\" 编辑 \")]),_c('el-popconfirm',{staticStyle:{\"margin-left\":\"9px\"},attrs:{\"title\":\"确定删除吗？\"},on:{\"confirm\":function($event){return _vm.handleDelete(slotProps.row)}}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"size\":\"small\",\"type\":\"danger\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)]}}])})],2),_c('div',{staticClass:\"pagination-wrapper\"},[_c('el-pagination',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"page-size\":_vm.pageSize,\"current-page\":_vm.pageNum,\"total\":_vm.total,\"background\":\"\",\"layout\":\"sizes, prev, pager, next, jumper, ->, total\"},on:{\"update:pageSize\":function($event){_vm.pageSize=$event},\"update:page-size\":function($event){_vm.pageSize=$event},\"update:currentPage\":function($event){_vm.pageNum=$event},\"update:current-page\":function($event){_vm.pageNum=$event},\"current-change\":_vm.reload,\"size-change\":function($event){return _vm.reload()}}})],1),_c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"visible\":_vm.addDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.form}},[_vm._l((_vm.options.columns),function(col,i){return [(!col.pk && col.type === 'number')?_c('el-form-item',{key:i,attrs:{\"label\":col.label}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.form[col.prop]),callback:function ($$v) {_vm.$set(_vm.form, col.prop, _vm._n($$v))},expression:\"form[col.prop]\"}})],1):(!col.pk && col.type === 'boolean')?_c('el-form-item',{key:i,attrs:{\"label\":col.label}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},model:{value:(_vm.form[col.prop]),callback:function ($$v) {_vm.$set(_vm.form, col.prop, $$v)},expression:\"form[col.prop]\"}})],1):(!col.pk && col.ref)?_c('el-form-item',{key:i,attrs:{\"label\":col.label}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form[col.ref.key]),callback:function ($$v) {_vm.$set(_vm.form, col.ref.key, $$v)},expression:\"form[col.ref.key]\"}},_vm._l((col.ref.select),function(item,j){return _c('el-option',{key:j,attrs:{\"label\":item[col.ref.label],\"value\":item.id}})}),1)],1):(!col.pk)?_c('el-form-item',{key:i,attrs:{\"label\":col.label}},[_c('el-input',{model:{value:(_vm.form[col.prop]),callback:function ($$v) {_vm.$set(_vm.form, col.prop, $$v)},expression:\"form[col.prop]\"}})],1):_vm._e()]})],2),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.commit}},[_vm._v(\"确 定\")])],1)],1),(_vm.options.enableDetails)?_c('el-dialog',{attrs:{\"visible\":_vm.detailsDialogVisible,\"title\":\"详细信息\",\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.detailsDialogVisible=$event}}},[_c('div',_vm._l((_vm.options.detailsColumns),function(col,i){return _c('p',{key:i},[_c('strong',[_vm._v(_vm._s(col.label)+\"：\")]),_vm._v(_vm._s(_vm.detailsData[col.prop])+\" \")])}),0),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.detailsDialogVisible = false}}},[_vm._v(\"关 闭\")])],1)]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"crud\">\n    <div id=\"crud-header\">\n      <el-button\n        @click=\"handleAdd\"\n        size=\"small\"\n        type=\"primary\">\n        添加\n      </el-button>\n      <el-input\n        @change=\"reload()\"\n        placeholder=\"输入关键字搜索\"\n        prefix-icon=\"el-icon-search\"\n        style=\"width: 200px\"\n        v-model=\"keyword\"/>\n    </div>\n    <el-table\n      :data=\"tableData\"\n      border\n      size=\"small\"\n      stripe\n      style=\"width: 100%\"\n      v-loading=\"loading\">\n      <template v-for=\"(col, i) in options.columns\">\n        <el-table-column\n          :key=\"i\"\n          :label=\"col.label\"\n          v-if=\"col.type === 'boolean'\">\n          <template v-slot=\"slotProps\">\n            <el-tag :type=\"slotProps.row.status ? 'success' : 'danger'\">\n              {{ slotProps.row.status ? 'YES' : 'NO' }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column\n          :key=\"i\"\n          :label=\"col.label\"\n          :prop=\"col.prop\"\n          v-else>\n        </el-table-column>\n      </template>\n      <el-table-column\n        fixed=\"right\"\n        label=\"操作\">\n        <template v-slot=\"slotProps\">\n          <el-button\n            @click=\"handleDetails(slotProps.row)\"\n            size=\"small\"\n            v-if=\"options.enableDetails\">\n            详细\n          </el-button>\n          <el-button\n            @click=\"handleEdit(slotProps.row)\"\n            size=\"small\"\n            type=\"primary\">\n            编辑\n          </el-button>\n          <el-popconfirm\n            @confirm=\"handleDelete(slotProps.row)\"\n            style=\"margin-left: 9px\"\n            title=\"确定删除吗？\">\n            <el-button size=\"small\" slot=\"reference\" type=\"danger\">删除</el-button>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div class=\"pagination-wrapper\">\n      <el-pagination\n        :page-size.sync=\"pageSize\"\n        :current-page.sync=\"pageNum\"\n        :total=\"total\"\n        @current-change=\"reload\"\n        @size-change=\"reload()\"\n        background\n        layout=\"sizes, prev, pager, next, jumper, ->, total\"\n        style=\"margin-top: 10px\">\n      </el-pagination>\n    </div>\n    <!-- dialog for add or edit -->\n    <el-dialog\n      :title=\"dialogTitle\"\n      :visible.sync=\"addDialogVisible\"\n      width=\"30%\">\n      <el-form :model=\"form\">\n        <template v-for=\"(col, i) in options.columns\">\n          <el-form-item\n            :key=\"i\"\n            :label=\"col.label\"\n            v-if=\"!col.pk && col.type === 'number'\">\n            <el-input type=\"number\" v-model.number=\"form[col.prop]\"></el-input>\n          </el-form-item>\n          <el-form-item\n            :key=\"i\"\n            :label=\"col.label\"\n            v-else-if=\"!col.pk && col.type === 'boolean'\">\n            <el-switch\n              active-color=\"#13ce66\"\n              inactive-color=\"#ff4949\"\n              v-model=\"form[col.prop]\">\n            </el-switch>\n          </el-form-item>\n          <el-form-item\n            :key=\"i\"\n            :label=\"col.label\"\n            v-else-if=\"!col.pk && col.ref\">\n            <el-select placeholder=\"请选择\" v-model=\"form[col.ref.key]\">\n              <el-option\n                :key=\"j\"\n                :label=\"item[col.ref.label]\"\n                :value=\"item.id\"\n                v-for=\"(item, j) in col.ref.select\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            :key=\"i\"\n            :label=\"col.label\"\n            v-else-if=\"!col.pk\">\n            <el-input v-model=\"form[col.prop]\"></el-input>\n          </el-form-item>\n        </template>\n      </el-form>\n      <span class=\"dialog-footer\" slot=\"footer\">\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\n        <el-button @click=\"commit\" type=\"primary\">确 定</el-button>\n      </span>\n    </el-dialog>\n    <!-- dialog for details -->\n    <el-dialog\n      :visible.sync=\"detailsDialogVisible\"\n      title=\"详细信息\"\n      v-if=\"options.enableDetails\"\n      width=\"30%\">\n      <div>\n        <p :key=\"i\" v-for=\"(col, i) in options.detailsColumns\">\n          <strong>{{ col.label }}：</strong>{{ detailsData[col.prop] }}\n        </p>\n      </div>\n      <span class=\"dialog-footer\" slot=\"footer\">\n        <el-button @click=\"detailsDialogVisible = false\">关 闭</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Crud',\n  props: ['options'],\n  data() {\n    return {\n      dialogTitle: '',\n      loading: false,\n      detailsDialogVisible: false,\n      addDialogVisible: false,\n      detailsData: {},\n      tableData: [],\n      form: {},\n      total: 0,\n      pageNum: 1,\n      pageSize: 10,\n      keyword: '',\n    };\n  },\n  methods: {\n    handleEdit(row) {\n      this.form = row;\n      this.dialogTitle = '编辑';\n      this.addDialogVisible = true;\n    },\n    handleDelete(row) {\n      this.options.remove({ id: row.id })\n        .then((resp) => {\n          const { message } = resp;\n          this.$message.success(message);\n          this.reload();\n        });\n    },\n    handleDetails(row) {\n      this.options.getDetails({ id: row.id })\n        .then((resp) => {\n          this.detailsData = resp.data;\n          this.detailsDialogVisible = true;\n        });\n    },\n    handleAdd() {\n      this.form = {};\n      this.dialogTitle = '添加';\n      this.addDialogVisible = true;\n    },\n    commit() {\n      if (this.form.id) {\n        this.options.update(this.form)\n          .then((resp) => {\n            const { message } = resp;\n            this.$message.success(message);\n            this.reload();\n            this.addDialogVisible = false;\n          });\n      } else {\n        this.options.add(this.form)\n          .then((resp) => {\n            const { message } = resp;\n            this.$message.success(message);\n            this.reload();\n            this.addDialogVisible = false;\n          });\n      }\n    },\n    reload(pageNum = 1) {\n      this.pageNum = pageNum;\n      this.loading = true;\n      this.options.getList({\n        pageNum,\n        pageSize: this.pageSize,\n        keyword: this.keyword,\n      })\n        .then((resp) => {\n          this.loading = false;\n          const { list, total } = resp.data;\n          this.tableData = list;\n          this.total = total;\n        });\n    },\n  },\n  mounted() {\n    this.reload();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  #crud-header {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 10px;\n  }\n\n  .pagination-wrapper {\n    display: flex;\n    justify-content: flex-end;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crud.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crud.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Crud.vue?vue&type=template&id=0d095cde&scoped=true&\"\nimport script from \"./Crud.vue?vue&type=script&lang=js&\"\nexport * from \"./Crud.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Crud.vue?vue&type=style&index=0&id=0d095cde&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d095cde\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}