{"version":3,"sources":["webpack:///./src/api/building.js","webpack:///./src/components/Crud.vue?0fd0","webpack:///./src/views/cms/Building.vue?3285","webpack:///src/views/cms/Building.vue","webpack:///./src/views/cms/Building.vue?bb0c","webpack:///./src/views/cms/Building.vue","webpack:///./src/components/Crud.vue?5675","webpack:///src/components/Crud.vue","webpack:///./src/components/Crud.vue?ab13","webpack:///./src/components/Crud.vue"],"names":["getList","params","request","url","method","getAll","all","getDetails","id","add","data","remove","update","render","_vm","this","_h","$createElement","_c","_self","attrs","crudOptions","staticRenderFns","name","components","Crud","columns","enableDetails","detailsColumns","component","staticClass","on","handleAdd","_v","staticStyle","$event","reload","model","value","callback","$$v","keyword","expression","directives","rawName","tableData","_l","options","col","i","type","key","label","scopedSlots","_u","fn","slotProps","row","status","_s","prop","handleDetails","_e","handleEdit","handleDelete","slot","pageSize","pageNum","total","dialogTitle","addDialogVisible","form","pk","ref","$set","item","j","_n","commit","detailsDialogVisible","detailsData","props","loading","methods","mounted"],"mappings":"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","file":"js/chunk-7dd641a2.23f02f19.js","sourcesContent":["import request from '../utils/request';\n\nexport function getList(params = {}) {\n  return request({\n    url: '/building',\n    method: 'GET',\n    params,\n  });\n}\n\nexport function getAll() {\n  return request({\n    url: '/building',\n    method: 'GET',\n    params: {\n      all: true,\n    },\n  });\n}\n\nexport function getDetails({ id }) {\n  return request({\n    url: '/building/details',\n    method: 'GET',\n    params: {\n      id,\n    },\n  });\n}\n\nexport function add(data) {\n  return request({\n    url: '/building',\n    method: 'POST',\n    data,\n  });\n}\n\nexport function remove({ id }) {\n  return request({\n    url: '/building',\n    method: 'DELETE',\n    params: {\n      id,\n    },\n  });\n}\n\nexport function update(data) {\n  return request({\n    url: '/building',\n    method: 'PUT',\n    data,\n  });\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crud.vue?vue&type=style&index=0&id=0d095cde&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"building\"}},[_c('Crud',{attrs:{\"options\":_vm.crudOptions}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"building\">\n    <Crud :options=\"crudOptions\"/>\n  </div>\n</template>\n\n<script>\nimport Crud from '../../components/Crud.vue';\nimport {\n  add, getDetails, getList, remove, update,\n} from '../../api/building';\n\nexport default {\n  name: 'Building',\n  components: {\n    Crud,\n  },\n  data() {\n    return {\n      crudOptions: {\n        getList,\n        columns: [\n          {\n            prop: 'id',\n            label: '#',\n            pk: true,\n          },\n          {\n            prop: 'aliasName',\n            label: '楼宇',\n          },\n          {\n            prop: 'department',\n            label: '单位',\n          },\n          {\n            prop: 'fullName',\n            label: '命名',\n          },\n        ],\n        add,\n        remove,\n        update,\n        enableDetails: true,\n        getDetails,\n        detailsColumns: [\n          {\n            prop: 'currentFreeClassrooms',\n            label: '空闲教室数',\n          },\n          {\n            prop: 'totalNumberOfClassrooms',\n            label: '教室总数',\n          },\n          {\n            prop: 'freeCapacity',\n            label: '剩余容量（人）',\n          },\n          {\n            prop: 'totalCapacity',\n            label: '总容量（人）',\n          },\n        ],\n      },\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Building.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Building.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Building.vue?vue&type=template&id=014356a7&scoped=true&\"\nimport script from \"./Building.vue?vue&type=script&lang=js&\"\nexport * from \"./Building.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"014356a7\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"crud\"},[_c('div',{attrs:{\"id\":\"crud-header\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\" 添加 \")]),_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"输入关键字搜索\",\"prefix-icon\":\"el-icon-search\"},on:{\"change\":function($event){return _vm.reload()}},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}})],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"size\":\"small\",\"stripe\":\"\"}},[_vm._l((_vm.options.columns),function(col,i){return [(col.type === 'boolean')?_c('el-table-column',{key:i,attrs:{\"label\":col.label},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [_c('el-tag',{attrs:{\"type\":slotProps.row.status ? 'success' : 'danger'}},[_vm._v(\" \"+_vm._s(slotProps.row.status ? 'YES' : 'NO')+\" \")])]}}],null,true)}):_c('el-table-column',{key:i,attrs:{\"label\":col.label,\"prop\":col.prop}})]}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [(_vm.options.enableDetails)?_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleDetails(slotProps.row)}}},[_vm._v(\" 详细 \")]):_vm._e(),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleEdit(slotProps.row)}}},[_vm._v(\" 编辑 \")]),_c('el-popconfirm',{staticStyle:{\"margin-left\":\"9px\"},attrs:{\"title\":\"确定删除吗？\"},on:{\"confirm\":function($event){return _vm.handleDelete(slotProps.row)}}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"size\":\"small\",\"type\":\"danger\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)]}}])})],2),_c('div',{staticClass:\"pagination-wrapper\"},[_c('el-pagination',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"page-size\":_vm.pageSize,\"current-page\":_vm.pageNum,\"total\":_vm.total,\"background\":\"\",\"layout\":\"sizes, prev, pager, next, jumper, ->, total\"},on:{\"update:pageSize\":function($event){_vm.pageSize=$event},\"update:page-size\":function($event){_vm.pageSize=$event},\"update:currentPage\":function($event){_vm.pageNum=$event},\"update:current-page\":function($event){_vm.pageNum=$event},\"current-change\":_vm.reload,\"size-change\":function($event){return _vm.reload()}}})],1),_c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"visible\":_vm.addDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.form}},[_vm._l((_vm.options.columns),function(col,i){return [(!col.pk && col.type === 'number')?_c('el-form-item',{key:i,attrs:{\"label\":col.label}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.form[col.prop]),callback:function ($$v) {_vm.$set(_vm.form, col.prop, _vm._n($$v))},expression:\"form[col.prop]\"}})],1):(!col.pk && col.type === 'boolean')?_c('el-form-item',{key:i,attrs:{\"label\":col.label}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},model:{value:(_vm.form[col.prop]),callback:function ($$v) {_vm.$set(_vm.form, col.prop, $$v)},expression:\"form[col.prop]\"}})],1):(!col.pk && col.ref)?_c('el-form-item',{key:i,attrs:{\"label\":col.label}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form[col.ref.key]),callback:function ($$v) {_vm.$set(_vm.form, col.ref.key, $$v)},expression:\"form[col.ref.key]\"}},_vm._l((col.ref.select),function(item,j){return _c('el-option',{key:j,attrs:{\"label\":item[col.ref.label],\"value\":item.id}})}),1)],1):(!col.pk)?_c('el-form-item',{key:i,attrs:{\"label\":col.label}},[_c('el-input',{model:{value:(_vm.form[col.prop]),callback:function ($$v) {_vm.$set(_vm.form, col.prop, $$v)},expression:\"form[col.prop]\"}})],1):_vm._e()]})],2),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.commit}},[_vm._v(\"确 定\")])],1)],1),(_vm.options.enableDetails)?_c('el-dialog',{attrs:{\"visible\":_vm.detailsDialogVisible,\"title\":\"详细信息\",\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.detailsDialogVisible=$event}}},[_c('div',_vm._l((_vm.options.detailsColumns),function(col,i){return _c('p',{key:i},[_c('strong',[_vm._v(_vm._s(col.label)+\"：\")]),_vm._v(_vm._s(_vm.detailsData[col.prop])+\" \")])}),0),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.detailsDialogVisible = false}}},[_vm._v(\"关 闭\")])],1)]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"crud\">\n    <div id=\"crud-header\">\n      <el-button\n        @click=\"handleAdd\"\n        size=\"small\"\n        type=\"primary\">\n        添加\n      </el-button>\n      <el-input\n        @change=\"reload()\"\n        placeholder=\"输入关键字搜索\"\n        prefix-icon=\"el-icon-search\"\n        style=\"width: 200px\"\n        v-model=\"keyword\"/>\n    </div>\n    <el-table\n      :data=\"tableData\"\n      border\n      size=\"small\"\n      stripe\n      style=\"width: 100%\"\n      v-loading=\"loading\">\n      <template v-for=\"(col, i) in options.columns\">\n        <el-table-column\n          :key=\"i\"\n          :label=\"col.label\"\n          v-if=\"col.type === 'boolean'\">\n          <template v-slot=\"slotProps\">\n            <el-tag :type=\"slotProps.row.status ? 'success' : 'danger'\">\n              {{ slotProps.row.status ? 'YES' : 'NO' }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column\n          :key=\"i\"\n          :label=\"col.label\"\n          :prop=\"col.prop\"\n          v-else>\n        </el-table-column>\n      </template>\n      <el-table-column\n        fixed=\"right\"\n        label=\"操作\">\n        <template v-slot=\"slotProps\">\n          <el-button\n            @click=\"handleDetails(slotProps.row)\"\n            size=\"small\"\n            v-if=\"options.enableDetails\">\n            详细\n          </el-button>\n          <el-button\n            @click=\"handleEdit(slotProps.row)\"\n            size=\"small\"\n            type=\"primary\">\n            编辑\n          </el-button>\n          <el-popconfirm\n            @confirm=\"handleDelete(slotProps.row)\"\n            style=\"margin-left: 9px\"\n            title=\"确定删除吗？\">\n            <el-button size=\"small\" slot=\"reference\" type=\"danger\">删除</el-button>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div class=\"pagination-wrapper\">\n      <el-pagination\n        :page-size.sync=\"pageSize\"\n        :current-page.sync=\"pageNum\"\n        :total=\"total\"\n        @current-change=\"reload\"\n        @size-change=\"reload()\"\n        background\n        layout=\"sizes, prev, pager, next, jumper, ->, total\"\n        style=\"margin-top: 10px\">\n      </el-pagination>\n    </div>\n    <!-- dialog for add or edit -->\n    <el-dialog\n      :title=\"dialogTitle\"\n      :visible.sync=\"addDialogVisible\"\n      width=\"30%\">\n      <el-form :model=\"form\">\n        <template v-for=\"(col, i) in options.columns\">\n          <el-form-item\n            :key=\"i\"\n            :label=\"col.label\"\n            v-if=\"!col.pk && col.type === 'number'\">\n            <el-input type=\"number\" v-model.number=\"form[col.prop]\"></el-input>\n          </el-form-item>\n          <el-form-item\n            :key=\"i\"\n            :label=\"col.label\"\n            v-else-if=\"!col.pk && col.type === 'boolean'\">\n            <el-switch\n              active-color=\"#13ce66\"\n              inactive-color=\"#ff4949\"\n              v-model=\"form[col.prop]\">\n            </el-switch>\n          </el-form-item>\n          <el-form-item\n            :key=\"i\"\n            :label=\"col.label\"\n            v-else-if=\"!col.pk && col.ref\">\n            <el-select placeholder=\"请选择\" v-model=\"form[col.ref.key]\">\n              <el-option\n                :key=\"j\"\n                :label=\"item[col.ref.label]\"\n                :value=\"item.id\"\n                v-for=\"(item, j) in col.ref.select\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            :key=\"i\"\n            :label=\"col.label\"\n            v-else-if=\"!col.pk\">\n            <el-input v-model=\"form[col.prop]\"></el-input>\n          </el-form-item>\n        </template>\n      </el-form>\n      <span class=\"dialog-footer\" slot=\"footer\">\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\n        <el-button @click=\"commit\" type=\"primary\">确 定</el-button>\n      </span>\n    </el-dialog>\n    <!-- dialog for details -->\n    <el-dialog\n      :visible.sync=\"detailsDialogVisible\"\n      title=\"详细信息\"\n      v-if=\"options.enableDetails\"\n      width=\"30%\">\n      <div>\n        <p :key=\"i\" v-for=\"(col, i) in options.detailsColumns\">\n          <strong>{{ col.label }}：</strong>{{ detailsData[col.prop] }}\n        </p>\n      </div>\n      <span class=\"dialog-footer\" slot=\"footer\">\n        <el-button @click=\"detailsDialogVisible = false\">关 闭</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Crud',\n  props: ['options'],\n  data() {\n    return {\n      dialogTitle: '',\n      loading: false,\n      detailsDialogVisible: false,\n      addDialogVisible: false,\n      detailsData: {},\n      tableData: [],\n      form: {},\n      total: 0,\n      pageNum: 1,\n      pageSize: 10,\n      keyword: '',\n    };\n  },\n  methods: {\n    handleEdit(row) {\n      this.form = row;\n      this.dialogTitle = '编辑';\n      this.addDialogVisible = true;\n    },\n    handleDelete(row) {\n      this.options.remove({ id: row.id })\n        .then((resp) => {\n          const { message } = resp;\n          this.$message.success(message);\n          this.reload();\n        });\n    },\n    handleDetails(row) {\n      this.options.getDetails({ id: row.id })\n        .then((resp) => {\n          this.detailsData = resp.data;\n          this.detailsDialogVisible = true;\n        });\n    },\n    handleAdd() {\n      this.form = {};\n      this.dialogTitle = '添加';\n      this.addDialogVisible = true;\n    },\n    commit() {\n      if (this.form.id) {\n        this.options.update(this.form)\n          .then((resp) => {\n            const { message } = resp;\n            this.$message.success(message);\n            this.reload();\n            this.addDialogVisible = false;\n          });\n      } else {\n        this.options.add(this.form)\n          .then((resp) => {\n            const { message } = resp;\n            this.$message.success(message);\n            this.reload();\n            this.addDialogVisible = false;\n          });\n      }\n    },\n    reload(pageNum = 1) {\n      this.pageNum = pageNum;\n      this.loading = true;\n      this.options.getList({\n        pageNum,\n        pageSize: this.pageSize,\n        keyword: this.keyword,\n      })\n        .then((resp) => {\n          this.loading = false;\n          const { list, total } = resp.data;\n          this.tableData = list;\n          this.total = total;\n        });\n    },\n  },\n  mounted() {\n    this.reload();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  #crud-header {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 10px;\n  }\n\n  .pagination-wrapper {\n    display: flex;\n    justify-content: flex-end;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crud.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crud.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Crud.vue?vue&type=template&id=0d095cde&scoped=true&\"\nimport script from \"./Crud.vue?vue&type=script&lang=js&\"\nexport * from \"./Crud.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Crud.vue?vue&type=style&index=0&id=0d095cde&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d095cde\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}